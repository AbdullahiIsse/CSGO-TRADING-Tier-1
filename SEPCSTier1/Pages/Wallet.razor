@page "/Wallet"
@using SEPCSTier1.Data
@using SEPCSTier1.Models
@inject IPaymentData PaymentData
@inject NavigationManager NavigationManager


<div class="container-md">
<div class="row">
    
     <EditForm Model="@newPaymentAccount" OnValidSubmit="@AddnewPaymentAccount">
                <DataAnnotationsValidator/> <ValidationSummary/>
                <div class="col">
       
         <h1> Payment Information</h1>
         <div class="form-group">
             <label for="inputAddress">Name</label>
             <InputTextArea class="form-control" id="Name" placeholder="Name" @bind-Value="newPaymentAccount.name"/>  
         </div>
                
         <div class="form-group">
             <label for="inputAddress">CardNumber</label>
             <InputTextArea class="form-control" id="CardNumber" placeholder="**** **** **** ****" @bind-Value="newPaymentAccount.cardnumber"/>
         </div>
                       
         <form>
             <div class="row">
                 <div class="col">
                     <label for="inputAddress">Expiration Date</label>
                     <InputTextArea class="form-control" placeholder="**/**" @bind-Value="newPaymentAccount.expirationdate"/>
                 </div>
                 <div class="col">
                     <label for="inputAddress">Security Code</label>
                     <InputTextArea class="form-control" placeholder="***" @bind-Value="newPaymentAccount.securitycode"/>
                 </div>
                         
             </div>
             <button type="submit" @onclick="AddnewPaymentAccount" class="btn btn-primary">Create & Pay</button>
         </form>
     </div>
      </EditForm>
    
    <div class="col">
          
         <div class="card" style="width: 18rem;">
                    <img class="card-img-top" src="credit.png" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Wallet</h5>
                        <p class="card-text">100â‚¬</p>
                        <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter price">
                        <a href="#" class="btn btn-primary">Insert Money</a>
                    </div>
                </div>
        
    </div>
    
    
</div>

</div>


@code {
    
    private Payment newPaymentAccount = new Payment();

    private void AddnewPaymentAccount()
    {
        Console.Write("HEJ");
        PaymentData.AddPayment(newPaymentAccount);
        NavigationManager.NavigateTo("/Shop", true);
    }


    private void test()
    {

        Console.WriteLine(newPaymentAccount.name + newPaymentAccount.cardnumber + newPaymentAccount.expirationdate + newPaymentAccount.securitycode);
    }

}